<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CricPro AI | Final Design</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary: #009688; --primary-dark: #00796B; --accent: #FFC107; --bg: #f0f2f5; 
            --white: #ffffff; --text-dark: #212121; --text-light: #f1f1f1; --text-muted: #757575;
            --border-color: #e0e0e0; --danger: #D32F2F; --wicket-bg: #FBE9E7;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        
        body { background: var(--bg); color: var(--text-dark); -webkit-font-smoothing: antialiased; }

        .main-header { 
            background: var(--primary); color: var(--white); padding: 15px 20px; 
            position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .header-title { font-weight: 800; font-size: 1.5rem; }
        .ist-clock { font-size: 0.8rem; background: rgba(0,0,0,0.1); padding: 5px 12px; border-radius: 20px; }

        .main-tabs { display: flex; background: var(--primary); }
        .main-tab { 
            flex: 1; text-align: center; padding: 14px; font-weight: 600; cursor: pointer; 
            color: var(--text-light); opacity: 0.8; border-bottom: 3px solid transparent; 
            transition: all 0.3s ease; text-transform: uppercase; font-size: 0.9rem;
        }
        .main-tab.active { opacity: 1; border-bottom: 3px solid var(--accent); }

        .container { max-width: 600px; margin: 20px auto; padding: 0 10px; }
        
        .match-card { 
            background: var(--white); border-radius: 12px; padding: 16px; margin-bottom: 16px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.06); cursor: pointer; border: 1px solid var(--border-color);
            transition: transform 0.2s ease;
        }
        .match-card:hover { transform: translateY(-3px); }

        /* --- Match Detail Modal --- */
        .modal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: #F4F7F6; display: none; flex-direction: column; 
            z-index: 1000; animation: slideInUp 0.3s ease-out;
        }
        @keyframes slideInUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .modal-header { 
            background: var(--primary); color: var(--white); padding: 12px 15px; 
            display: flex; align-items: center; gap: 15px; flex-shrink: 0;
        }
        .back-btn { cursor: pointer; font-size: 1.8rem; line-height: 1; }
        .modal-header-title { font-weight: 700; font-size: 1.1rem; }

        .modal-tabs { display: flex; background: var(--primary); overflow-x: auto; flex-shrink: 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .modal-tab { padding: 14px 20px; font-weight: 600; cursor: pointer; color: var(--text-light); opacity: 0.8; border-bottom: 3px solid transparent; white-space: nowrap; }
        .modal-tab.active { opacity: 1; border-bottom: 3px solid var(--accent); }
        
        .modal-content { flex-grow: 1; overflow-y: auto; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* --- LIVE TAB STYLES --- */
        .live-view { background: var(--white); }
        .live-summary { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--border-color); }
        .live-score-team { font-size: 1.2rem; font-weight: 700; margin-bottom: 4px; }
        .live-score-val { font-size: 2.5rem; font-weight: 800; }
        .live-score-overs { font-size: 1.5rem; color: var(--text-muted); font-weight: 500; margin-left: 5px; }
        .live-score-status { color: var(--danger); font-weight: 600; }
        .live-rates { text-align: right; }
        .rate-box { font-size: 0.9rem; }
        .rate-box span { color: var(--text-muted); }
        
        .live-player-strip { padding: 10px 15px; border-bottom: 1px solid var(--border-color); font-size: 0.9rem; }
        .live-player-row { display: flex; justify-content: space-between; align-items: center; }
        .live-player-name { font-weight: 600; color: var(--primary-dark); }
        .live-player-name.on-strike::after { content: '*'; color: var(--danger); margin-left: 2px; }
        .live-player-stats { display: flex; gap: 15px; font-weight: 700; }
        .live-bowler-row { margin-top: 10px; border-top: 1px dashed var(--border-color); padding-top: 10px; }

        .recent-over-section { padding: 15px; }
        .recent-over-balls { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }
        .ball-result { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; background: #E0E0E0; font-size: 0.9rem; }
        .ball-result.wicket { background: var(--danger); color: var(--white); }
        .ball-result.four { background: var(--primary-dark); color: var(--white); }
        .ball-result.six { background: var(--accent); color: var(--text-dark); }
        
        .commentary-feed { padding: 0 15px 15px; }
        .commentary-item { display: flex; gap: 15px; padding: 12px 0; border-bottom: 1px solid var(--border-color); }
        .commentary-ball { flex-shrink: 0; }
        .commentary-ball .over { font-weight: 700; }
        .commentary-ball .wicket-icon { width: 24px; height: 24px; border-radius: 50%; background: var(--danger); color: white; display: flex; align-items: center; justify-content: center; font-weight: 700; margin-top: 5px; }
        .commentary-text p { margin: 0; line-height: 1.5; font-size: 0.95rem; }

        /* --- SCORECARD TAB STYLES --- */
        .scorecard-view { padding: 10px; }
        .inning-card { background: var(--white); border-radius: 8px; margin-bottom: 10px; box-shadow: 0 1px 4px rgba(0,0,0,0.05); }
        .inning-header { display: flex; justify-content: space-between; align-items: center; padding: 15px; cursor: pointer; border-bottom: 1px solid var(--border-color); }
        .inning-header h3 { margin: 0; font-size: 1.1rem; }
        .inning-header .score { font-weight: 800; }
        .inning-header .arrow { font-size: 1.5rem; transform: rotate(180deg); transition: transform 0.3s; }
        .inning-card.collapsed .inning-header { border-bottom: none; }
        .inning-card.collapsed .arrow { transform: rotate(0deg); }
        .inning-content { display: block; }
        .inning-card.collapsed .inning-content { display: none; }
        .score-table { width: 100%; border-collapse: collapse; }
        .score-table th, .score-table td { text-align: left; padding: 10px 15px; border-bottom: 1px solid var(--border-color); font-size: 0.9rem; }
        .score-table th { background: #f7f7f7; color: var(--text-muted); font-size: 0.8rem; }
        .score-table tr:last-child td { border-bottom: none; }
        .batsman-name { font-weight: 600; }
        .dismissal { font-size: 0.8rem; color: var(--text-muted); }
        .score-table td:not(:first-child) { text-align: right; font-weight: 600; }
        .section-title { padding: 12px 15px; font-weight: 700; background: #fafafa; border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color); }
        .yet-to-bat { padding: 15px; line-height: 1.6; color: var(--text-muted); }

        /* --- SQUADS TAB STYLES --- */
        .squads-view { padding: 10px; }
        .squad-teams-toggle { display: flex; background: var(--white); border-radius: 8px; padding: 5px; margin-bottom: 10px; }
        .team-toggle { flex: 1; text-align: center; padding: 10px; font-weight: 700; border-radius: 6px; cursor: pointer; }
        .team-toggle.active { background: var(--primary); color: var(--white); }
        .squad-columns { display: flex; gap: 10px; }
        .squad-column { flex: 1; background: var(--white); border-radius: 8px; padding: 15px; }
        .squad-column h3 { font-size: 0.9rem; text-transform: uppercase; color: var(--text-muted); margin-bottom: 10px; }
        .player-list { list-style: none; }
        .player-item { display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--border-color); }
        .player-item:last-child { border-bottom: none; }
        .player-avatar { width: 40px; height: 40px; border-radius: 50%; background: #ccc; margin-right: 12px; }
        .player-name { font-weight: 600; font-size: 0.95rem; }
        .player-role { font-size: 0.8rem; color: var(--text-muted); }
        .player-tag { font-size: 0.8rem; color: var(--text-muted); margin-left: 4px; }
    </style>
</head>
<body>

<header class="main-header">
    <div class="header-top">
        <h2 class="header-title">CricPro AI</h2>
        <div id="ist-clock" class="ist-clock">IST: --:--</div>
    </div>
    <div class="main-tabs">
        <div class="main-tab active" onclick="switchMainTab('live', this)">Live</div>
        <div class="main-tab" onclick="switchMainTab('upcoming', this)">Upcoming</div>
        <div class="main-tab" onclick="switchMainTab('recent', this)">Recent</div>
    </div>
</header>

<div class="container"><div id="match-list"></div></div>

<!-- Match Detail Modal -->
<div id="modal" class="modal">
    <div class="modal-header">
        <span class="back-btn" onclick="closeModal()">&#x2190;</span>
        <div id="m-header-title" class="modal-header-title">Match Details</div>
    </div>
    <div class="modal-tabs">
        <div class="modal-tab active" onclick="switchModalTab('live', this)">LIVE</div>
        <div class="modal-tab" onclick="switchModalTab('scorecard', this)">SCORECARD</div>
        <div class="modal-tab" onclick="switchModalTab('squads', this)">SQUADS</div>
        <div class="modal-tab" onclick="switchModalTab('info', this)">INFO</div>
    </div>
    <div class="modal-content">
        <div id="tab-live" class="tab-content active"></div>
        <div id="tab-scorecard" class="tab-content"></div>
        <div id="tab-squads" class="tab-content"></div>
        <div id="tab-info" class="tab-content"></div>
    </div>
</div>

<script>
    // --- MOCK DATA FOR ACCURATE UI REPLICATION ---
    const MOCK_MATCH_DETAIL = {
        teams: { t1: "Dubai Capitals", t2: "Sharjah Warriorz" },
        status: "Dubai Capitals need 118 runs to win",
        live: {
            score: { team: "DCP", val: "17-1", overs: "(4)" },
            rates: { crr: "4.25", req: "7.38" },
            target: 135, partnership: "17(24)",
            batter: { name: "Shayan Jahangir", onStrike: true, r: 10, b: 10, s4: 1, s6: 0, sr: 100.0 },
            bowler: { name: "Sikandar Raza", o: 2, m: 0, r: 6, w: 0, er: 3.0 },
            recentOver: ["1", "2", "1", "1", "0", "W"],
            commentary: [
                { over: "3.6", text: "<strong>Harmeet Singh to Sediqullah Atal, out Bowled!!</strong> Bowled around his legs. Atal misses and the ball finds the top of leg-stump. <strong>Sediqullah Atal b Harmeet Singh 7(14)</strong>", wicket: true },
                { over: "3.5", text: "Harmeet Singh to Sediqullah Atal, no run, flat on a good length outside off, Atal uses his feet to swipe and the thick inside-edge hits the pad.", wicket: false },
                { over: "3.4", text: "Harmeet Singh to Shayan Jahangir, 1 run, full toss on the stumps, flicks it to deep square leg", wicket: false }
            ]
        },
        scorecard: {
            innings1: {
                team: "Sharjah Warriorz", score: "134-8", overs: "20.0", collapsed: true,
                batting: [{ name: "J Charles", dismissal: "c Neesham b Willey", r: 25, b: 18, s4: 3, s6: 1, sr: 138.8 }],
                bowling: [{ name: "David Willey", o: 4, m: 0, r: 22, w: 2, er: 5.5 }],
                fow: [{ score: "25-1", over: "2.5" }]
            },
            innings2: {
                team: "Dubai Capitals", score: "17-1", overs: "4.0", collapsed: false,
                batting: [
                    { name: "Sediqullah Atal", dismissal: "b Harmeet Singh", r: 7, b: 14, s4: 0, s6: 0, sr: 50.0 },
                    { name: "Shayan Jahangir (wk)", dismissal: "batting", r: 10, b: 10, s4: 1, s6: 0, sr: 100.0 },
                ],
                bowling: [
                    { name: "Sikandar Raza", o: 2, m: 0, r: 6, w: 0, er: 3.0 },
                    { name: "Taskin Ahmed", o: 1, m: 0, r: 6, w: 0, er: 6.0 },
                    { name: "Harmeet Singh", o: 1, m: 0, r: 5, w: 1, er: 5.0 },
                ],
                extras: "0 (b 0, lb 0, w 0, nb 0, p 0)", total: "17-1 (4.0)", crr: "4.25",
                yetToBat: "Jordan Cox, Leus du Plooy, Mohammad Nabi (c), James Neesham, David Willey, Waqar Salamkheil, Mustafizur Rahman",
                fow: [{ score: "17-1", over: "3.6", player: "Sediqullah Atal" }],
                powerplay: { overs: "1-6", runs: "N/A" }
            }
        },
        squads: {
            dcp: {
                name: "Dubai Capitals",
                players: [
                    { name: "Shayan Jahangir", role: "WK-Batter", tag: "(wk)" }, { name: "Sediqullah Atal", role: "Batter" },
                    { name: "Jordan Cox", role: "Batter" }, { name: "Leus du Plooy", role: "Batter" },
                    { name: "Mohammad Nabi", role: "Batting Allrounder", tag: "(c)" }, { name: "James Neesham", role: "Batting Allrounder" },
                    { name: "David Willey", role: "Bowling Allrounder" }, { name: "Jawadullah", role: "Bowler" },
                ]
            },
            sw: {
                name: "Sharjah Warriorz",
                players: [
                    { name: "J Charles", role: "WK-Batter" }, { name: "Monank Patel", role: "WK-Batter" },
                    { name: "Kohler-Cadmore", role: "Batter" }, { name: "Sikandar Raza", role: "Batting Allrounder" },
                    { name: "Tim Southee", role: "Bowler", tag: "(c)" }, { name: "Adil Rashid", role: "Bowler" },
                ]
            }
        }
    };
    
    // --- API & Core Logic ---
    const API_KEY = "07a80675-e5e7-414a-9144-cc26f8af3172";
    let allMatches = [];

    // --- Core Functions (fetch, switch tabs, etc.) ---
    async function fetchMatches() {
        // This function would fetch real data
        // For now, we'll use a placeholder to demonstrate the UI
        allMatches = [{
            id: 'mock1', t1: MOCK_MATCH_DETAIL.teams.t1, t2: MOCK_MATCH_DETAIL.teams.t2,
            t1s: MOCK_MATCH_DETAIL.live.score.val + " " + MOCK_MATCH_DETAIL.live.score.overs,
            t2s: MOCK_MATCH_DETAIL.scorecard.innings1.score,
            status: MOCK_MATCH_DETAIL.status, series: "International League T20", ms: 'live'
        }];
        switchMainTab('live', document.querySelector('.main-tab.active'));
    }

    function switchMainTab(type, el) {
        document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        const list = document.getElementById('match-list');
        list.innerHTML = '';
        allMatches.forEach(m => {
            const card = document.createElement('div');
            card.className = 'match-card';
            card.onclick = () => openModal(m);
            card.innerHTML = `<div class="series-name">${m.series}</div>
                <div class="team-row"><span class="team-name">${m.t1}</span><span class="team-score">${m.t1s || ''}</span></div>
                <div class="team-row"><span class="team-name">${m.t2}</span><span class="team-score">${m.t2s || ''}</span></div>
                <div class="match-status">${m.status}</div>`;
            list.appendChild(card);
        });
    }

    function openModal(matchData) {
        document.getElementById('modal').style.display = 'flex';
        document.getElementById('m-header-title').innerText = `${matchData.t1} v ${matchData.t2}`;
        // Load content for all tabs using mock data
        loadLiveTab();
        loadScorecardTab();
        loadSquadsTab();
        // Reset to the first tab
        switchModalTab('live', document.querySelector('.modal-tab'));
    }

    function closeModal() { document.getElementById('modal').style.display = 'none'; }
    
    function switchModalTab(tabName, el) {
        document.querySelectorAll('.modal-tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.getElementById(`tab-${tabName}`).classList.add('active');
    }

    // --- TAB CONTENT RENDERERS ---
    
    function loadLiveTab() {
        const live = MOCK_MATCH_DETAIL.live;
        const recentBallsHTML = live.recentOver.map(b => {
            let className = 'ball-result';
            if (b === 'W') className += ' wicket';
            else if (b === '4') className += ' four';
            else if (b === '6') className += ' six';
            return `<div class="${className}">${b}</div>`;
        }).join('');
        const commentaryHTML = live.commentary.map(c => `
            <div class="commentary-item">
                <div class="commentary-ball">
                    ${c.wicket ? `<div class="wicket-icon">W</div>` : `<div class="over">${c.over}</div>`}
                </div>
                <div class="commentary-text"><p>${c.text}</p></div>
            </div>`).join('');

        const content = `
        <div class="live-view">
            <div class="live-summary">
                <div class="live-score">
                    <div class="live-score-team">${live.score.team}</div>
                    <span class="live-score-val">${live.score.val}</span>
                    <span class="live-score-overs">${live.score.overs}</span>
                    <div class="live-score-status">${MOCK_MATCH_DETAIL.status}</div>
                </div>
                <div class="live-rates">
                    <div class="rate-box"><span>CRR</span> ${live.rates.crr}</div>
                    <div class="rate-box"><span>REQ</span> ${live.rates.req}</div>
                </div>
            </div>
            <div class="live-player-strip">
                <div class="live-player-row">
                    <div class="live-player-name ${live.batter.onStrike ? 'on-strike' : ''}">${live.batter.name}</div>
                    <div class="live-player-stats">
                        <span>${live.batter.r}</span>
                        <span>(${live.batter.b})</span>
                    </div>
                </div>
                <div class="live-player-row live-bowler-row">
                    <div class="live-player-name">${live.bowler.name}</div>
                    <div class="live-player-stats">
                       <span>${live.bowler.o}-${live.bowler.m}-${live.bowler.r}-${live.bowler.w}</span>
                    </div>
                </div>
            </div>
            <div class="recent-over-section">
                <strong>OVER ${live.score.overs.replace(/[()]/g, '')}</strong>
                <div class="recent-over-balls">${recentBallsHTML}</div>
            </div>
            <div class="commentary-feed">${commentaryHTML}</div>
        </div>`;
        document.getElementById('tab-live').innerHTML = content;
    }

    function loadScorecardTab() {
        const sc = MOCK_MATCH_DETAIL.scorecard;
        const renderInning = (inningData) => {
            const battingRows = inningData.batting.map(p => `
                <tr>
                    <td><div class="batsman-name">${p.name}</div><div class="dismissal">${p.dismissal}</div></td>
                    <td>${p.r}</td><td>${p.b}</td><td>${p.s4}</td><td>${p.s6}</td><td>${p.sr}</td>
                </tr>`).join('');
            const bowlingRows = (inningData.bowling || []).map(b => `
                <tr>
                    <td><div class="batsman-name">${b.name}</div></td>
                    <td>${b.o}</td><td>${b.m}</td><td>${b.r}</td><td>${b.w}</td><td>${b.er}</td>
                </tr>`).join('');
             const fowRows = (inningData.fow || []).map(f => `
                <tr><td>${f.player || ''}</td><td>${f.score}</td><td>${f.over}</td></tr>`).join('');

            return `
            <div class="inning-card ${inningData.collapsed ? 'collapsed' : ''}">
                <div class="inning-header" onclick="this.parentElement.classList.toggle('collapsed')">
                    <div><h3>${inningData.team}</h3></div>
                    <div class="score">${inningData.score} (${inningData.overs}) <span class="arrow">â–²</span></div>
                </div>
                <div class="inning-content">
                    <table class="score-table"><thead><tr><th>Batter</th><th>R</th><th>B</th><th>4s</th><th>6s</th><th>SR</th></tr></thead><tbody>${battingRows}</tbody></table>
                    ${inningData.extras ? `<table class="score-table">
                        <tr><td>Extras</td><td colspan="5">${inningData.extras}</td></tr>
                        <tr><td><strong>Total</strong></td><td colspan="5"><strong>${inningData.total}</strong> (CRR: ${inningData.crr})</td></tr>
                    </table>` : ''}
                    ${inningData.yetToBat ? `<div class="section-title">Yet to bat</div><div class="yet-to-bat">${inningData.yetToBat}</div>` : ''}
                    <div class="section-title">Bowling</div>
                    <table class="score-table"><thead><tr><th>Bowler</th><th>O</th><th>M</th><th>R</th><th>W</th><th>ER</th></tr></thead><tbody>${bowlingRows}</tbody></table>
                    <div class="section-title">Fall of Wickets</div>
                    <table class="score-table"><thead><tr><th>Player</th><th>Score</th><th>Over</th></tr></thead><tbody>${fowRows}</tbody></table>
                </div>
            </div>`;
        };
        document.getElementById('tab-scorecard').innerHTML = `<div class="scorecard-view">${renderInning(sc.innings1)}${renderInning(sc.innings2)}</div>`;
    }

    function loadSquadsTab() {
        const squads = MOCK_MATCH_DETAIL.squads;
        const renderPlayerList = (players) => players.map(p => `
            <li class="player-item">
                <img src="https://via.placeholder.com/40" class="player-avatar">
                <div>
                    <div class="player-name">${p.name}<span class="player-tag">${p.tag || ''}</span></div>
                    <div class="player-role">${p.role}</div>
                </div>
            </li>`).join('');

        const content = `
        <div class="squads-view">
            <div class="squad-columns">
                <div class="squad-column">
                    <h3>${squads.dcp.name}</h3>
                    <ul class="player-list">${renderPlayerList(squads.dcp.players)}</ul>
                </div>
                <div class="squad-column">
                    <h3>${squads.sw.name}</h3>
                    <ul class="player-list">${renderPlayerList(squads.sw.players)}</ul>
                </div>
            </div>
        </div>`;
        document.getElementById('tab-squads').innerHTML = content;
    }

    window.onload = () => { updateClock(); fetchMatches(); };
</script>
</body>
</html>




